<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>bilibili热搜</title>
  <style>
    .trending{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .header .title{font-weight:700;margin-bottom:8px}
    .trendings-single{display:flex;flex-direction:column;gap:6px}
    .trending-item{display:flex;align-items:center;gap:8px}
    .trendings-rank{width:20px;text-align:center;font-weight:700}
    .search-rank-top{color:#e91e63}
    .trending-text{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .trending-mark{height:20px}
  </style>
</head>
<body>
  <div id="bili-hot-root">加载中…</div>
  <script>
    (async function () {
      const JSON_PATH = "./bilibili.json"; // 同目录
      async function fetchJSON(p){const r=await fetch(p,{cache:"no-store"});if(!r.ok)throw new Error(r.status);return r.json()}
      function el(tag, cls, text){const e=document.createElement(tag);if(cls)e.className=cls;if(text!=null)e.textContent=text;return e}
      try{
        const data = await fetchJSON(JSON_PATH);
        const wrap = el("div","trending"); wrap.style.maxWidth="247px";
        const header = el("div","header"); header.appendChild(el("div","title","bilibili热搜")); wrap.appendChild(header);
        const list = el("div","trendings-single");
        (data.items||[]).forEach(it=>{
          const item = el("div","trending-item"); item.tabIndex=0;
          const rank = el("div","trendings-rank" + (it.rank<=3?" search-rank-top":""), String(it.rank));
          const text = el("div","trending-text", it.text);
          item.append(rank,text);
          if(it.mark){
            const img = new Image(); img.className="trending-mark";
            img.src = it.mark.startsWith("//") ? "https:"+it.mark : it.mark;
            img.referrerPolicy="no-referrer"; item.appendChild(img);
          }
          list.appendChild(item);
        });
        wrap.appendChild(list);
        document.getElementById("bili-hot-root").replaceChildren(wrap);
      }catch(e){
        document.getElementById("bili-hot-root").textContent="bilibili 热搜加载失败";
        console.error(e);
      }
    })();
  </script>
</body>
</html>
